import { Gender } from '@labrute/prisma';
import { PETS_TOTAL_ODDS } from './brute/pets';
import { SKILLS_TOTAL_ODDS } from './brute/skills';
import { WeaponAnimations, WEAPONS_TOTAL_ODDS } from './brute/weapons';

export const FIGHTS_PER_DAY = 6;

export const ARENA_OPPONENTS_COUNT = 6;
export const ARENA_OPPONENTS_MAX_GAP = 2;

export const BRUTE_STARTING_POINTS = 11;
export const PERKS_TOTAL_ODDS = WEAPONS_TOTAL_ODDS + PETS_TOTAL_ODDS + SKILLS_TOTAL_ODDS;

export const SHIELD_BLOCK_ODDS = 0.45;
export const BARE_HANDS_TEMPO = 1.2;

export const Animations = [
  'arrive-end', 'arrive-start', 'attack', 'block', 'death', 'drink', 'eat',
  'equip', 'evade', 'grab', 'grabbed', 'hit', 'hit-0', 'hit-1', 'hit-2',
  'idle', 'launch', 'monk-loop', 'monk-start', 'prepare-throw', 'run',
  'stolen', 'steal', 'strengthen', 'throw', 'train', 'trapped-loop', 'trapped-start',
  'trash', 'win', ...WeaponAnimations,
] as const;
export type Animation = typeof Animations[number];

export const ANIMATION_ANCHORS: Record<Gender, Record<Animation, [number, number]>> = {
  male: {
    'arrive-end': [0.4354, 0.7682],
    'arrive-start': [0.4354, 0.7682],
    attack: [0, 0],
    block: [0.5183, 0.7248],
    death: [0.4749, 0.7416],
    drink: [0.4486, 0.7849],
    eat: [0.521, 0.8705],
    equip: [0.4593, 0.7407],
    evade: [0.5648, 0.9075],
    grab: [0.4134, 0.7902],
    grabbed: [0.5127, 0.7192],
    hit: [0, 0],
    'hit-0': [0.516, 0.8253],
    'hit-1': [0.4859, 0.7536],
    'hit-2': [0.4851, 0.669],
    idle: [0.4946, 0.7951],
    launch: [0.4206, 0.7859],
    'monk-loop': [0.5349, 0.7462],
    'monk-start': [0.5349, 0.7462],
    'prepare-throw': [0.6319, 0.7293],
    run: [0.5292, 0.8688],
    slash: [0.3249, 0.8274],
    stolen: [0.5138, 0.7995],
    steal: [0.4558, 0.7632],
    strengthen: [0.4292, 0.8274],
    throw: [0.3148, 0.6127],
    train: [0.4615, 0.821],
    'trapped-loop': [0.4191, 0.6905],
    'trapped-start': [0.4191, 0.6905],
    trash: [0.5189, 0.7276],
    win: [0.4851, 0.7744],
    fist: [0.348, 0.7338],
    estoc: [0.5178, 0.7592],
    whip: [0.2692, 0.8253],
  },
  female: {
    'arrive-end': [0.4833, 0.7799],
    'arrive-start': [0.4833, 0.7799],
    attack: [0, 0],
    block: [0.5069, 0.848],
    death: [0.4785, 0.7884],
    drink: [0.4921, 0.8572],
    eat: [0.5247, 0.8536],
    equip: [0.5062, 0.8565],
    evade: [0.468, 0.8756],
    grab: [0.4595, 0.848],
    grabbed: [0.5105, 0.8112],
    hit: [0.4857, 0.8805],
    'hit-0': [0, 0],
    'hit-1': [0, 0],
    'hit-2': [0, 0],
    idle: [0.5042, 0.8539],
    launch: [0.4587, 0.7707],
    'monk-loop': [0.4473, 0.7648],
    'monk-start': [0.4473, 0.7648],
    'prepare-throw': [0.4949, 0.8444],
    run: [0.4658, 0.8302],
    slash: [0.3638, 0.8239],
    stolen: [0.5069, 0.8423],
    steal: [0.4722, 0.8324],
    strengthen: [0.5296, 0.848],
    throw: [0.4346, 0.8368],
    train: [0.5041, 0.8536],
    'trapped-loop': [0.3751, 0.7226],
    'trapped-start': [0.3751, 0.7226],
    trash: [0.5265, 0.8742],
    win: [0.5062, 0.9025],
    fist: [0.4602, 0.7459],
    estoc: [0.4878, 0.8508],
    whip: [0.2064, 0.848],
  },
};

export const WEAPON_ANCHOR = {
  x: 11.2,
  y: 5.6,
} as const;

export const WEAPON_ANIMATIONS: Record<Gender, Record<Animation, ({
  anchor: [number, number];
  rotation: number;
} | null)[]>> = {
  male: {
    'arrive-end': [],
    'arrive-start': [],
    attack: [],
    block: [
      { anchor: [19.2, -17.5], rotation: -14.7 },
      { anchor: [17.8, -17.5], rotation: -21.5 },
      { anchor: [13.1, -18.3], rotation: -42.3 },
      { anchor: [7.3, -19.2], rotation: -69.3 },
      { anchor: [7.3, -19.2], rotation: -69.3 },
      { anchor: [7.3, -19.2], rotation: -69.3 },
      { anchor: [7.3, -19.2], rotation: -69.3 },
      { anchor: [7.3, -19.2], rotation: -69.3 },
      { anchor: [7.3, -19.2], rotation: -69.3 },
      { anchor: [7.3, -19.2], rotation: -69.3 },
      { anchor: [7.3, -19.2], rotation: -69.3 },
      { anchor: [7.5, -18.5], rotation: -63.5 },
      { anchor: [9.1, -18.7], rotation: -56.7 },
      { anchor: [10.8, -18], rotation: -51.7 },
      { anchor: [11.3, -18], rotation: -45 },
      { anchor: [12.6, -17.8], rotation: -41.3 },
      { anchor: [13.6, -17.8], rotation: -37.7 },
      { anchor: [15.2, -17.8], rotation: -32.3 },
      { anchor: [15.9, -18], rotation: -28.7 },
      { anchor: [16.9, -17.8], rotation: -24.2 },
      { anchor: [17.8, -17.5], rotation: -21.1 },
      { anchor: [18.5, -17.5], rotation: -17 },
      { anchor: [19.2, -17.8], rotation: -14.7 },
    ],
    death: [
      { anchor: [16.6, -11.9], rotation: -13.8 },
      { anchor: [16.6, -11.9], rotation: -13.8 },
      { anchor: [16.6, -11.9], rotation: -13.8 },
      { anchor: [16.6, -11.9], rotation: -13.8 },
      { anchor: [16.6, -11.7], rotation: -13.8 },
      { anchor: [16.9, -11.7], rotation: -13.8 },
      { anchor: [17.1, -12.2], rotation: -13.8 },
      { anchor: [17.4, -12.2], rotation: -13.8 },
      { anchor: [17.1, -11.1], rotation: -13.8 },
      { anchor: [17.6, -10.9], rotation: -13.8 },
      { anchor: [17.8, -11], rotation: -13.8 },
      { anchor: [18.1, -9.9], rotation: -13.8 },
      { anchor: [19.2, -10.6], rotation: -13.8 },
      { anchor: [20, -11.7], rotation: -13.8 },
      { anchor: [20.7, -12.8], rotation: -13.8 },
      { anchor: [21.9, -14.2], rotation: -13.8 },
      { anchor: [21.9, -13], rotation: -13.8 },
      { anchor: [22.1, -11.5], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
      { anchor: [22.1, -9.4], rotation: -13.8 },
    ],
    drink: [],
    eat: [],
    equip: [
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      { anchor: [18.1, -53.7], rotation: -94.6 },
      { anchor: [18.5, -51.6], rotation: -88.3 },
      { anchor: [19.2, -45.2], rotation: -79.7 },
      { anchor: [20, -35.4], rotation: -55.3 },
      { anchor: [19.2, -25.4], rotation: -35 },
      { anchor: [18.8, -19.4], rotation: -18.3 },
      { anchor: [18.8, -17.8], rotation: -15.2 },
    ],
    evade: [
      { anchor: [20, -50.2], rotation: -66.6 },
    ],
    grab: [
      { anchor: [8.2, -24.9], rotation: -56.2 },
      { anchor: [8, -24.7], rotation: -56.2 },
      { anchor: [8, -24.7], rotation: -56.2 },
      { anchor: [8, -23.5], rotation: -56.2 },
      { anchor: [8, -22.3], rotation: -56.2 },
      { anchor: [8, -23.3], rotation: -56.2 },
      { anchor: [8, -24], rotation: -56.2 },
      { anchor: [8, -25.2], rotation: -56.2 },
    ],
    grabbed: [],
    hit: [],
    'hit-0': [
      { anchor: [18.5, -20.9], rotation: -28.7 },
      { anchor: [17.4, -26.1], rotation: -54.9 },
      { anchor: [14.3, -31.8], rotation: -80.6 },
      { anchor: [10.5, -33.3], rotation: -84.7 },
      { anchor: [7.3, -34.4], rotation: -88.3 },
      { anchor: [6.6, -34.9], rotation: -88.7 },
      { anchor: [5.9, -34.7], rotation: -88.3 },
      { anchor: [5.4, -34.9], rotation: -88.3 },
      { anchor: [4.7, -34.9], rotation: -88.3 },
      { anchor: [4.7, -35.7], rotation: -88.3 },
      { anchor: [4.2, -35.4], rotation: -88.3 },
      { anchor: [9.4, -24.9], rotation: -62.6 },
      { anchor: [14.7, -14.4], rotation: -29.2 },
      { anchor: [14.7, -14.4], rotation: -29.2 },
      { anchor: [14.7, -14.4], rotation: -29.2 },
    ],
    'hit-1': [
      { anchor: [17.1, -18.0], rotation: -12.9 },
      { anchor: [12.4, -18.5], rotation: -17.0 },
      { anchor: [4.7, -19.4], rotation: -24.7 },
      { anchor: [5.4, -19.4], rotation: -24.7 },
      { anchor: [6.6, -19.2], rotation: -23.2 },
      { anchor: [8.0, -19.2], rotation: -21.5 },
      { anchor: [9.9, -18.3], rotation: -21.5 },
      { anchor: [12.4, -18.3], rotation: -18.3 },
      { anchor: [15.7, -18.0], rotation: -17.0 },
      { anchor: [19.0, -17.3], rotation: -14.7 },
    ],
    'hit-2': [
      { anchor: [17.1, -19.2], rotation: -11.6 },
      { anchor: [11.0, -20.2], rotation: -4.9 },
      { anchor: [0.5, -21.4], rotation: 4.1 },
      { anchor: [-1.5, -20.2], rotation: 9.5 },
      { anchor: [-5, -20.2], rotation: 26.7 },
      { anchor: [-7.9, -17.1], rotation: 45.1 },
      { anchor: [-6.5, -17.8], rotation: 38.4 },
      { anchor: [-6.5, -17.8], rotation: 37 },
      { anchor: [-4.6, -17.5], rotation: 34.8 },
      { anchor: [-2.2, -17.8], rotation: 27.2 },
      { anchor: [0.7, -17.8], rotation: 23.1 },
      { anchor: [4, -18.3], rotation: 15.1 },
      { anchor: [8.7, -18.7], rotation: 5.9 },
      { anchor: [13.1, -18.7], rotation: -2.7 },
      { anchor: [18.5, -19.2], rotation: -13.4 },
    ],
    idle: [
      { anchor: [17.8, -18.9], rotation: -15.2 },
      { anchor: [17.8, -18.9], rotation: -15.2 },
      { anchor: [17.8, -18.9], rotation: -15.2 },
      { anchor: [17.8, -18.9], rotation: -15.2 },
      { anchor: [17.6, -19], rotation: -15.2 },
      { anchor: [17.8, -19], rotation: -15.2 },
      { anchor: [17.8, -19], rotation: -15.2 },
      { anchor: [17.8, -19], rotation: -15.2 },
      { anchor: [17.8, -19], rotation: -15.2 },
      { anchor: [17.8, -19], rotation: -15.2 },
      { anchor: [17.8, -19], rotation: -15.2 },
      { anchor: [17.8, -19], rotation: -15.2 },
      { anchor: [17.8, -19], rotation: -15.2 },
      { anchor: [16.9, -19.5], rotation: -15.2 },
      { anchor: [16.9, -19.5], rotation: -15.2 },
      { anchor: [16.9, -19.5], rotation: -15.2 },
      { anchor: [16.9, -19.5], rotation: -15.2 },
      { anchor: [16.9, -19.5], rotation: -15.2 },
      { anchor: [16.9, -19.5], rotation: -15.2 },
      { anchor: [16.9, -19.5], rotation: -15.2 },
      { anchor: [16.6, -19.7], rotation: -15.2 },
      { anchor: [16.6, -19.7], rotation: -15.2 },
      { anchor: [16.6, -19.7], rotation: -15.2 },
      { anchor: [16.6, -19.7], rotation: -15.2 },
      { anchor: [16.6, -19.7], rotation: -15.2 },
      { anchor: [16.6, -19.7], rotation: -15.2 },
      { anchor: [16.9, -19.7], rotation: -15.2 },
      { anchor: [17.2, -19.7], rotation: -15.2 },
      { anchor: [17.4, -19.7], rotation: -15.2 },
      { anchor: [17.6, -19.7], rotation: -15.2 },
      { anchor: [17.6, -19.7], rotation: -15.2 },
      { anchor: [17.9, -20], rotation: -15.2 },
      { anchor: [18.2, -20], rotation: -15.2 },
      { anchor: [18.4, -19.6], rotation: -15.2 },
      { anchor: [18.6, -19.6], rotation: -15.2 },
      { anchor: [18.6, -19.6], rotation: -15.2 },
      { anchor: [18.6, -19.6], rotation: -15.2 },
      { anchor: [18.6, -19.4], rotation: -15.2 },
      { anchor: [18.8, -19.4], rotation: -15.2 },
    ],
    launch: [],
    'monk-loop': [],
    'monk-start': [],
    'prepare-throw': [
      { anchor: [8.9, -29.4], rotation: -88.3 },
      { anchor: [6.6, -30.9], rotation: -104.9 },
      { anchor: [6.6, -30.9], rotation: -122.2 },
      { anchor: [3.5, -34.2], rotation: -143.6 },
      { anchor: [-4.3, -37.8], rotation: -158.6 },
      { anchor: [-13.6, -41.8], rotation: -174.6 },
      { anchor: [-17.6, -41.1], rotation: 177 },
      { anchor: [-20.7, -41.1], rotation: 164.3 },
      { anchor: [-24.1, -40.6], rotation: 155.2 },
      { anchor: [-26.7, -40.4], rotation: 144.4 },
      { anchor: [-28.1, -40.2], rotation: 140.7 },
      { anchor: [-29.3, -40.4], rotation: 135.3 },
      { anchor: [-29.6, -39.9], rotation: 135.3 },
    ],
    run: [
      { anchor: [-13.1, -29.4], rotation: 52.7 },
      { anchor: [0.2, -19.4], rotation: 6.8 },
      { anchor: [15, -21.4], rotation: -10.3 },
      { anchor: [27.1, -22.8], rotation: -31 },
      { anchor: [10.8, -17.5], rotation: -121.8 },
      { anchor: [1.2, -17.1], rotation: -43.6 },
      { anchor: [-12.9, -23.5], rotation: 52.3 },
    ],
    slash: [
      { anchor: [7, -24.9], rotation: -45.9 },
      { anchor: [2.1, -33.5], rotation: -67.5 },
      { anchor: [-8.3, -37.3], rotation: -81.5 },
      { anchor: [16.9, -25.9], rotation: -61.2 },
      { anchor: [45.3, -16.6], rotation: -27.4 },
      { anchor: [22.1, -2.6], rotation: 47.8 },
      { anchor: [11.8, 0.3], rotation: 69.8 },
      { anchor: [0.9, -3.3], rotation: 93.6 },
      { anchor: [-9.5, -8.5], rotation: 120.4 },
      { anchor: [-2.7, -9.2], rotation: 82.3 },
      { anchor: [5.6, -11.9], rotation: 32.6 },
      { anchor: [19, -16.6], rotation: -13.8 },
    ],
    stolen: [],
    steal: [
      { anchor: [15.2, -19.4], rotation: -14.3 },
      { anchor: [15.2, -18.3], rotation: -14.3 },
      { anchor: [15.2, -16.1], rotation: -14.3 },
      { anchor: [19, -17.1], rotation: -28.7 },
      { anchor: [23.3, -19.4], rotation: -40.9 },
      { anchor: [29.7, -21.8], rotation: -60.7 },
      { anchor: [29.7, -21.6], rotation: -56.7 },
      { anchor: [28.5, -21.8], rotation: -54.4 },
      { anchor: [27.3, -21.6], rotation: -53.1 },
      { anchor: [26.4, -21.1], rotation: -49.9 },
      { anchor: [25.2, -20.9], rotation: -46.3 },
      { anchor: [24.5, -22.8], rotation: -49.9 },
      { anchor: [23.8, -23.7], rotation: -56.2 },
      { anchor: [22.6, -25.6], rotation: -63.9 },
      { anchor: [24, -23.5], rotation: -58.5 },
      { anchor: [25.2, -21.1], rotation: -47.2 },
      { anchor: [24, -22.8], rotation: -48.1 },
      { anchor: [23.3, -24.2], rotation: -54 },
      { anchor: [22.6, -25.6], rotation: -62.1 },
      { anchor: [23.3, -24], rotation: -58 },
      { anchor: [24, -22.5], rotation: -53.5 },
      { anchor: [25.2, -21.4], rotation: -46.3 },
      { anchor: [24.5, -22.3], rotation: -50.4 },
      { anchor: [23.8, -24.2], rotation: -57.6 },
      { anchor: [23, -25.6], rotation: -61.6 },
    ],
    strengthen: [],
    throw: [
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
    ],
    train: [],
    'trapped-loop': [],
    'trapped-start': [],
    trash: [
      { anchor: [16.4, -18.3], rotation: -22.4 },
      { anchor: [6.3, -23.7], rotation: -42.7 },
      { anchor: [-11.9, -37.1], rotation: -78.8 },
      null,
      null,
      null,
      null,
      null,
      null,
    ],
    win: [],
    fist: [],
    estoc: [
      { anchor: [7.7, -20.9], rotation: -38.6 },
      { anchor: [4.7, -26.4], rotation: -49.5 },
      { anchor: [15.5, -20.4], rotation: -38.6 },
      { anchor: [30.4, -18], rotation: -30.1 },
      { anchor: [44.1, -16.4], rotation: -17.9 },
      { anchor: [42.7, -16.4], rotation: -17.9 },
      { anchor: [39.2, -16.4], rotation: -17.9 },
      { anchor: [33, -16.4], rotation: -16.1 },
      { anchor: [25.9, -17.1], rotation: -16.5 },
      { anchor: [18.8, -17.5], rotation: -14.3 },
    ],
    whip: [],
  },
  female: {
    'arrive-end': [],
    'arrive-start': [],
    attack: [],
    block: [],
    death: [],
    drink: [],
    eat: [],
    equip: [],
    evade: [],
    grab: [],
    grabbed: [],
    hit: [],
    'hit-0': [],
    'hit-1': [],
    'hit-2': [],
    idle: [],
    launch: [],
    'monk-loop': [],
    'monk-start': [],
    'prepare-throw': [],
    run: [],
    slash: [],
    stolen: [],
    steal: [],
    strengthen: [],
    throw: [],
    train: [],
    'trapped-loop': [],
    'trapped-start': [],
    trash: [],
    win: [],
    fist: [],
    estoc: [],
    whip: [],
  },
};

export const BruteRankings = [11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0] as const;
export type BruteRanking = typeof BruteRankings[number];

export const GLOBAL_TOURNAMENT_START_HOUR = 11;

export interface Perk {
  name: 'pet' | 'skill' | 'weapon';
  odds: number;
}

export const PERK_ODDS: Perk[] = [
  { name: 'pet', odds: PETS_TOTAL_ODDS },
  { name: 'skill', odds: SKILLS_TOTAL_ODDS },
  { name: 'weapon', odds: WEAPONS_TOTAL_ODDS },
];

export const StatColor = {
  counter: 'cyan',
  evasion: '#17a717',
  block: '#8686ff',
  accuracy: 'yellow',
  disarm: '#ff70ff',
  combo: 'orange',
  damage: 'red',
} as const;

export const NEW_BRUTE_BASE_COST = 500;